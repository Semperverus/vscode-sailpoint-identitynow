{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://developer.sailpoint.com/schemas/access-profile.json",
    "title": "Access Profile",
    "description": "Schema of a Access Profile",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "id": {
            "type": "string",
            "description": "System-generated unique ID of the Object",
            "example": "2c91808568c529c60168cca6f90c1313",
            "readOnly": true
        },
        "name": {
            "type": "string",
            "description": "Human-readable display name of the object to which this reference applies",
            "example": "aName"
        },
        "description": {
            "anyOf": [
                {
                    "type": "string"
                },
                {
                    "type": "null"
                }
            ],
            "description": "The description of the Access Profile.",
            "example": "My access profile"
        },
        "created": {
            "type": "string",
            "description": "Creation date of the Object",
            "example": "2015-05-28T14:07:17Z",
            "format": "date-time",
            "readOnly": true
        },
        "modified": {
            "type": "string",
            "description": "Last modification date of the Object",
            "example": "2015-05-28T14:07:17Z",
            "format": "date-time",
            "readOnly": true
        },
        "enabled": {
            "type": "boolean",
            "example": true,
            "description": "Whether the access profile is enabled or disabled."
        },
        "owner": {
            "anyOf": [
                {
                    "type": "null"
                },
                {
                    "type": "object",
                    "description": "The owner of the Access Profile.",
                    "nullable": true,
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": [
                                "IDENTITY"
                            ],
                            "description": "Type of the object to which this reference applies",
                            "example": "IDENTITY"
                        },
                        "id": {
                            "type": "string",
                            "description": "ID of the object to which this reference applies",
                            "example": "2c9180835d191a86015d28455b4b232a"
                        },
                        "name": {
                            "type": "string",
                            "description": "Human-readable display name of the object to which this reference applies",
                            "example": "William Wilson"
                        }
                    }
                }
            ]
        },
        "source": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "SOURCE"
                    ],
                    "description": "Type of the object to which this reference applies",
                    "example": "SOURCE"
                },
                "id": {
                    "type": "string",
                    "description": "ID of the object to which this reference applies",
                    "example": "2c9180835d191a86015d28455b4b232a"
                },
                "name": {
                    "type": "string",
                    "description": "Human-readable display name of the object to which this reference applies",
                    "example": "HR Active Directory"
                }
            }
        },
        "entitlements": {
            "type": "array",
            "example": [
                {
                    "id": "2c9180835d191a86015d28455b4b232a",
                    "type": "ENTITLEMENT",
                    "name": "My Entitlement"
                }
            ],
            "items": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "ENTITLEMENT"
                        ],
                        "description": "The type of the Entitlement, will always be ENTITLEMENT",
                        "example": "ENTITLEMENT"
                    },
                    "id": {
                        "type": "string",
                        "description": "The ID of the Entitlement",
                        "example": "2c9180835d191a86015d28455b4b232a"
                    },
                    "name": {
                        "type": "string",
                        "description": "The display name of the Entitlement",
                        "example": "All Users"
                    }
                }
            },
            "description": "A list of entitlements associated with the Access Profile. If enabled is false this is allowed to be empty otherwise it needs to contain at least one Entitlement."
        },
        "requestable ": {
            "type": "boolean",
            "example": true,
            "description": "Whether the Access Profile is requestable via access request. Currently, making an Access Profile non-requestable is only supported for customers enabled with the new Request Center. Otherwise, attempting to create an Access Profile with a value false in this field results in a 400 error."
        },
        "accessRequestConfig": {
            "type": "object",
            "properties": {
                "commentsRequired ": {
                    "type": "boolean",
                    "example": true,
                    "description": "Whether the requester of the containing object must provide comments justifying the request."
                },
                "denialCommentsRequired ": {
                    "type": "boolean",
                    "example": true,
                    "description": "Whether an approver must provide comments when denying the request."
                },
                "approvalSchemes ": {
                    "type": "array",
                    "description": "List describing the steps in approving the request",
                    "items": {
                        "type": "object",
                        "properties": {
                            "approverType": {
                                "type": "string",
                                "enum": [
                                    "APP_OWNER",
                                    "OWNER",
                                    "SOURCE_OWNER",
                                    "MANAGER",
                                    "GOVERNANCE_GROUP"
                                ],
                                "description": "Describes the individual or group that is responsible for an approval step. ",
                                "example": "OWNER"
                            },
                            "approverId ": {
                                "type": "string",
                                "description": "Id of the specific approver, used only when approverType is GOVERNANCE_GROUP",
                                "example": "2c9180835d191a86015d28455b4b232a"
                            }
                        }
                    }
                }
            }
        },
        "revocationRequestConfig": {
            "type": "object",
            "properties": {
                "commentsRequired ": {
                    "type": "boolean",
                    "example": true,
                    "description": "Whether the requester of the containing object must provide comments justifying the request."
                },
                "denialCommentsRequired ": {
                    "type": "boolean",
                    "example": true,
                    "description": "Whether an approver must provide comments when denying the request."
                },
                "approvalSchemes ": {
                    "type": "array",
                    "description": "List describing the steps in approving the request",
                    "items": {
                        "type": "object",
                        "properties": {
                            "approverType": {
                                "type": "string",
                                "enum": [
                                    "APP_OWNER",
                                    "OWNER",
                                    "SOURCE_OWNER",
                                    "MANAGER",
                                    "GOVERNANCE_GROUP"
                                ],
                                "description": "Describes the individual or group that is responsible for an approval step. ",
                                "example": "OWNER"
                            },
                            "approverId ": {
                                "type": "string",
                                "description": "Id of the specific approver, used only when approverType is GOVERNANCE_GROUP",
                                "example": "2c9180835d191a86015d28455b4b232a"
                            }
                        }
                    }
                }
            }
        },
        "segments": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "List of IDs of segments, if any, to which this Access Profile is assigned."
        },
        "provisioningCriteria": {
            "type": "object",
            "properties": {
                "operation": {
                    "type": "string",
                    "enum": [
                        "EQUALS",
                        "NOT_EQUALS",
                        "CONTAINS",
                        "HAS",
                        "AND",
                        "OR"
                    ],
                    "description": "Supported operations on ProvisioningCriteria.",
                    "example": "EQUALS"
                },
                "attribute": {
                    "type": "string",
                    "description": "Name of the Account attribute to be tested. If operation is one of EQUALS, NOT_EQUALS, CONTAINS, or HAS, this field is required. Otherwise, specifying it is an error."
                },
                "value": {
                    "type": "string",
                    "description": "String value to test the Account attribute w/r/t the specified operation. If the operation is one of EQUALS, NOT_EQUALS, or CONTAINS, this field is required. Otherwise, specifying it is an error. If the Attribute is not String-typed, it will be converted to the appropriate type."
                },
                "children": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "operation": {
                                "type": "string",
                                "enum": [
                                    "EQUALS",
                                    "NOT_EQUALS",
                                    "CONTAINS",
                                    "HAS",
                                    "AND",
                                    "OR"
                                ],
                                "description": "Supported operations on ProvisioningCriteria.",
                                "example": "EQUALS"
                            },
                            "attribute": {
                                "type": "string",
                                "description": "Name of the Account attribute to be tested. If operation is one of EQUALS, NOT_EQUALS, CONTAINS, or HAS, this field is required. Otherwise, specifying it is an error."
                            },
                            "value": {
                                "type": "string",
                                "description": "String value to test the Account attribute w/r/t the specified operation. If the operation is one of EQUALS, NOT_EQUALS, or CONTAINS, this field is required. Otherwise, specifying it is an error. If the Attribute is not String-typed, it will be converted to the appropriate type."
                            },
                            "children": {
                                "type": "array",
                                "items": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "description": "Array of child criteria. Required if the operation is AND or OR, otherwise it must be left null. A maximum of three levels of criteria are supported, including leaf nodes."
                }
            },
            "description": "When an Identity has multiple Accounts on the Source with which an Access Profile is associated, this expression is evaluated against those Accounts to choose one to provision with the Access Profile."
        }
    },
    "required": [
        "name",
        "owner",
        "source"
    ]
}